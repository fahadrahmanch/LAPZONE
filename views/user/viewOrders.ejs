<!DOCTYPE html>
<html lang="zxx">


<meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>HONO - Multi Purpose HTML Template</title>
    <link href="https://placehold.co/16x16" rel="shortcut icon" type="image/png"/>
    <script src="https://cdn.tailwindcss.com">
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <!-- ::::::::::::::Favicon icon::::::::::::::-->
    <link rel="shortcut icon" href="/assets/images/favicon.ico" type="image/png">
    
    
   
    <link rel="stylesheet" href="/assets/css/vendor/vendor.min.css">
    <!-- <link rel="stylesheet" href="/assets/css/plugins/plugins.min.css"> -->
    <link rel="stylesheet" href="/assets/css/plugins/plugins.min.css">
    <link rel="stylesheet" href="/assets/css/style.min.css">

</head>

<body>
    <!-- Start Header Area -->
    <header class="header-section d-none d-xl-block">
        <div class="header-wrapper">
            <div class="header-bottom header-bottom-color--golden section-fluid sticky-header sticky-color--golden">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12 d-flex align-items-center justify-content-between">
                            <!-- Start Header Logo -->
                            <div class="header-logo">
                                <div style="display: flex; align-items: center; font-family: 'Arial', sans-serif; font-size: 24px; font-weight: bold; color: #333;">
                                    <!-- Laptop Icon -->
                                    <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
                                        <rect x="3" y="4" width="18" height="12" rx="2"></rect>
                                        <path d="M2 18h20"></path>
                                    </svg>
                                    
                                    <span>LapZone</span>
                                </div>
                            </div>
                            <!-- End Header Logo -->

                            <!-- Start Header Main Menu -->
                            <div class="main-menu menu-color--black menu-hover-color--golden">
                                <nav>
                                    <ul>
                                        <li class="">
                                            <a class="active " href="/">Home <i
                                                    class=""></i></a>
                                            <!-- Sub Menu -->
                                        
                                        </li>
                                        <li class=" has-megaitem">
                                            <a href="/shop">Shop <i
                                                    class=""></i></a>
                                        </li>
                                        <li>
                                            <a href="/about">About Us</a>
                                        </li>
                                        <li>
                                            <a href="/contact">Contact Us</a>
                                        </li>
                                        <div class="onhover-show-div user fa fa-user"> 
                                            <ul > 
                      
                                               <% if(message) { %>
                                                <li><a class="text-decoration-none" href="/account">Account</a></li>
                                                <li><a class="text-decoration-none" href="/logout">Logout</a></li>
                                              <% } else { %>
                      
                                                <li><a class="text-decoration-none" href="/login">Login</a></li>
                                                <li><a class="text-decoration-none" href="/signup">Register</a></li> 
                                                <% } %>
                      
                                              </ul>
                                          </div>
                                    </ul>
                                </nav>
                            </div>
                            <!-- End Header Main Menu Start -->

                            <!-- Start Header Action Link -->
                            <ul class="header-action-link action-color--black action-hover-color--golden">
                                <li>
                                    <a href="#offcanvas-wishlish" class="offcanvas-toggle">
                                        <i class="icon-heart"></i>
                                        <!-- <span class="item-count">3</span> -->
                                    </a>
                                </li>
                                <li>
                                    <a href="#offcanvas-add-cart" class="offcanvas-toggle">
                                        <i class="icon-bag"></i>
                                        <!-- <span class="item-count">3</span> -->
                                    </a>
                                </li>
                                <li>
                                    <!-- <a href="#search">
                                        <i class="icon-magnifier"></i>
                                    </a> -->
                                </li>
                                <li>
                                    <!-- <a href="#offcanvas-about" class="offacnvas offside-about offcanvas-toggle">
                                        <i class="icon-menu"></i>
                                    </a> -->
                                </li>
                            </ul>
                            <!-- End Header Action Link -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Start Header Area -->

    <!-- Start Mobile Header -->
    <div class="mobile-header mobile-header-bg-color--golden section-fluid d-lg-block d-xl-none">
        <div class="container">
            <div class="row">
                <div class="col-12 d-flex align-items-center justify-content-between">
                    <!-- Start Mobile Left Side -->
                    <div class="mobile-header-left">
                        <ul class="mobile-menu-logo">
                            <li>
                                <div style="display: flex; align-items: center; font-family: 'Arial', sans-serif; font-size: 24px; font-weight: bold; color: #333;">
                                    <!-- Laptop Icon -->
                                    <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
                                        <rect x="3" y="4" width="18" height="12" rx="2"></rect>
                                        <path d="M2 18h20"></path>
                                    </svg>
                                    
                                    <span>LapZone</span>
                                </div>

                                </a>
                            </li>
                        </ul>
                    </div>
                    <!-- End Mobile Left Side -->

                    <!-- Start Mobile Right Side -->
                    <div class="mobile-right-side">
                        <ul class="header-action-link action-color--black action-hover-color--golden">
                            <li>
                                <!-- <a href="#search">
                                    <i class="icon-magnifier"></i>
                                </a> -->
                            </li>
                            <li>
                                <a href="#offcanvas-wishlish" class="offcanvas-toggle">
                                    <i class="icon-heart"></i>
                                    <!-- <span class="item-count">3</span> -->
                                </a>
                            </li>
                            <li>
                                <a href="#offcanvas-add-cart" class="offcanvas-toggle">
                                    <i class="icon-bag"></i>
                                    <!-- <span class="item-count">3</span> -->
                                </a>
                            </li>
                            <li>
                                <a href="#mobile-menu-offcanvas" class="offcanvas-toggle offside-menu">
                                    <i class="icon-menu"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!-- End Mobile Right Side -->
                </div>
            </div>
        </div>
    </div>
    <!-- End Mobile Header -->

    <!--  Start Offcanvas Mobile Menu Section -->
    <div id="mobile-menu-offcanvas" class="offcanvas offcanvas-rightside offcanvas-mobile-menu-section">
        <!-- Start Offcanvas Header -->
        <div class="offcanvas-header text-right">
            <button class="offcanvas-close"><i class="ion-android-close"></i></button>
        </div> <!-- End Offcanvas Header -->
        <!-- Start Offcanvas Mobile Menu Wrapper -->
        <div class="offcanvas-mobile-menu-wrapper">
            <!-- Start Mobile Menu  -->
            <div class="mobile-menu-bottom">
                <!-- Start Mobile Menu Nav -->
                <div class="offcanvas-menu">
                    <ul>
                        <li>
                            <a href="/"><span>Home</span></a>
                           
                        </li>
                        <li>
                            <a href="/shop"><span>Shop</span></a>
                         
                           
                            
                        </li>
                     
                       
                        <li><a href="/">About Us</a></li>
                        <li><a href="/">Contact Us</a></li>
                        <ul > 
                      
                            <% if(message) { %>
                             <li><a class="text-decoration-none" href="/account">Account</a></li>
                             <li><a class="text-decoration-none" href="/logout">Logout</a></li>
                           <% } else { %>
   
                             <li><a class="text-decoration-none" href="/login">Login</a></li>
                             <li><a class="text-decoration-none" href="/signup">Register</a></li> 
                             <% } %>
   
                           </ul>
                    </ul>
                </div> <!-- End Mobile Menu Nav -->
            </div> <!-- End Mobile Menu -->

            <!-- Start Mobile contact Info -->
        
            <!-- End Mobile contact Info -->

        </div> <!-- End Offcanvas Mobile Menu Wrapper -->
    </div> <!-- ...:::: End Offcanvas Mobile Menu Section:::... -->

    <!-- Start Offcanvas Mobile Menu Section -->
    <div id="offcanvas-about" class="offcanvas offcanvas-rightside offcanvas-mobile-about-section">
        <!-- Start Offcanvas Header -->
        <div class="offcanvas-header text-right">
            <button class="offcanvas-close"><i class="ion-android-close"></i></button>
        </div> <!-- End Offcanvas Header -->
        <!-- Start Offcanvas Mobile Menu Wrapper -->
        <!-- Start Mobile contact Info -->
        <div class="mobile-contact-info">
            <div class="logo">
                <a href="index.html"><img src="assets/images/logo/logo_white.png" alt=""></a>
            </div>

            <address class="address">
                <span>Address: Your address goes here.</span>
                <span>Call Us: 0123456789, 0123456789</span>
                <span>Email: demo@example.com</span>
            </address>

            <ul class="social-link">
                <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                <li><a href="#"><i class="fa fa-instagram"></i></a></li>
                <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
            </ul>

            <ul class="user-link">
                <li><a href="wishlist.html">Wishlist</a></li>
                <li><a href="cart.html">Cart</a></li>
                <li><a href="checkout.html">Checkout</a></li>
            </ul>
        </div>
        <!-- End Mobile contact Info -->
    </div> <!-- ...:::: End Offcanvas Mobile Menu Section:::... -->

    <!-- Start Offcanvas Addcart Section -->
    <div id="offcanvas-add-cart" class="offcanvas offcanvas-rightside offcanvas-add-cart-section">
        <!-- Start Offcanvas Header -->
        <div class="offcanvas-header text-right">
            <button class="offcanvas-close"><i class="ion-android-close"></i></button>
        </div> <!-- End Offcanvas Header -->

        <!-- Start  Offcanvas Addcart Wrapper -->
        <div class="offcanvas-add-cart-wrapper">
            <h4 class="offcanvas-title">Shopping Cart</h4>
            <ul class="offcanvas-cart">
                <li class="offcanvas-cart-item-single">
                    <div class="offcanvas-cart-item-block">
                        <a href="#" class="offcanvas-cart-item-image-link">
                            <img src="assets/images/product/default/home-1/default-1.jpg" alt=""
                                class="offcanvas-cart-image">
                        </a>
                        <div class="offcanvas-cart-item-content">
                            <a href="#" class="offcanvas-cart-item-link">Car Wheel</a>
                            <div class="offcanvas-cart-item-details">
                                <span class="offcanvas-cart-item-details-quantity">1 x </span>
                                <span class="offcanvas-cart-item-details-price">$49.00</span>
                            </div>
                        </div>
                    </div>
                    <div class="offcanvas-cart-item-delete text-right">
                        <a href="#" class="offcanvas-cart-item-delete"><i class="fa fa-trash-o"></i></a>
                    </div>
                </li>
                <li class="offcanvas-cart-item-single">
                    <div class="offcanvas-cart-item-block">
                        <a href="#" class="offcanvas-cart-item-image-link">
                            <img src="assets/images/product/default/home-2/default-1.jpg" alt=""
                                class="offcanvas-cart-image">
                        </a>
                        <div class="offcanvas-cart-item-content">
                            <a href="#" class="offcanvas-cart-item-link">Car Vails</a>
                            <div class="offcanvas-cart-item-details">
                                <span class="offcanvas-cart-item-details-quantity">3 x </span>
                                <span class="offcanvas-cart-item-details-price">$500.00</span>
                            </div>
                        </div>
                    </div>
                    <div class="offcanvas-cart-item-delete text-right">
                        <a href="#" class="offcanvas-cart-item-delete"><i class="fa fa-trash-o"></i></a>
                    </div>
                </li>
                <li class="offcanvas-cart-item-single">
                    <div class="offcanvas-cart-item-block">
                        <a href="#" class="offcanvas-cart-item-image-link">
                            <img src="assets/images/product/default/home-3/default-1.jpg" alt=""
                                class="offcanvas-cart-image">
                        </a>
                        <div class="offcanvas-cart-item-content">
                            <a href="#" class="offcanvas-cart-item-link">Shock Absorber</a>
                            <div class="offcanvas-cart-item-details">
                                <span class="offcanvas-cart-item-details-quantity">1 x </span>
                                <span class="offcanvas-cart-item-details-price">$350.00</span>
                            </div>
                        </div>
                    </div>
                    <div class="offcanvas-cart-item-delete text-right">
                        <a href="#" class="offcanvas-cart-item-delete"><i class="fa fa-trash-o"></i></a>
                    </div>
                </li>
            </ul>
            <div class="offcanvas-cart-total-price">
                <span class="offcanvas-cart-total-price-text">Subtotal:</span>
                <span class="offcanvas-cart-total-price-value">$170.00</span>
            </div>
            <ul class="offcanvas-cart-action-button">
                <li><a href="cart.html" class="btn btn-block btn-golden">View Cart</a></li>
                <li><a href="compare.html" class=" btn btn-block btn-golden mt-5">Checkout</a></li>
            </ul>
        </div> <!-- End  Offcanvas Addcart Wrapper -->

    </div> <!-- End  Offcanvas Addcart Section -->

    <!-- Start Offcanvas Mobile Menu Section -->
    <div id="offcanvas-wishlish" class="offcanvas offcanvas-rightside offcanvas-add-cart-section">
        <!-- Start Offcanvas Header -->
        <div class="offcanvas-header text-right">
            <button class="offcanvas-close"><i class="ion-android-close"></i></button>
        </div> <!-- ENd Offcanvas Header -->

        <!-- Start Offcanvas Mobile Menu Wrapper -->
        <div class="offcanvas-wishlist-wrapper">
            <h4 class="offcanvas-title">Wishlist</h4>
            <ul class="offcanvas-wishlist">
                <li class="offcanvas-wishlist-item-single">
                    <div class="offcanvas-wishlist-item-block">
                        <a href="#" class="offcanvas-wishlist-item-image-link">
                            <img src="assets/images/product/default/home-1/default-1.jpg" alt=""
                                class="offcanvas-wishlist-image">
                        </a>
                        <div class="offcanvas-wishlist-item-content">
                            <a href="#" class="offcanvas-wishlist-item-link">Car Wheel</a>
                            <div class="offcanvas-wishlist-item-details">
                                <span class="offcanvas-wishlist-item-details-quantity">1 x </span>
                                <span class="offcanvas-wishlist-item-details-price">$49.00</span>
                            </div>
                        </div>
                    </div>
                    <div class="offcanvas-wishlist-item-delete text-right">
                        <a href="#" class="offcanvas-wishlist-item-delete"><i class="fa fa-trash-o"></i></a>
                    </div>
                </li>
                <li class="offcanvas-wishlist-item-single">
                    <div class="offcanvas-wishlist-item-block">
                        <a href="#" class="offcanvas-wishlist-item-image-link">
                            <img src="assets/images/product/default/home-2/default-1.jpg" alt=""
                                class="offcanvas-wishlist-image">
                        </a>
                        <div class="offcanvas-wishlist-item-content">
                            <a href="#" class="offcanvas-wishlist-item-link">Car Vails</a>
                            <div class="offcanvas-wishlist-item-details">
                                <span class="offcanvas-wishlist-item-details-quantity">3 x </span>
                                <span class="offcanvas-wishlist-item-details-price">$500.00</span>
                            </div>
                        </div>
                    </div>
                    <div class="offcanvas-wishlist-item-delete text-right">
                        <a href="#" class="offcanvas-wishlist-item-delete"><i class="fa fa-trash-o"></i></a>
                    </div>
                </li>
                <li class="offcanvas-wishlist-item-single">
                    <div class="offcanvas-wishlist-item-block">
                        <a href="#" class="offcanvas-wishlist-item-image-link">
                            <img src="assets/images/product/default/home-3/default-1.jpg" alt=""
                                class="offcanvas-wishlist-image">
                        </a>
                        <div class="offcanvas-wishlist-item-content">
                            <a href="#" class="offcanvas-wishlist-item-link">Shock Absorber</a>
                            <div class="offcanvas-wishlist-item-details">
                                <span class="offcanvas-wishlist-item-details-quantity">1 x </span>
                                <span class="offcanvas-wishlist-item-details-price">$350.00</span>
                            </div>
                        </div>
                    </div>
                    <div class="offcanvas-wishlist-item-delete text-right">
                        <a href="#" class="offcanvas-wishlist-item-delete"><i class="fa fa-trash-o"></i></a>
                    </div>
                </li>
            </ul>
            <ul class="offcanvas-wishlist-action-button">
                <li><a href="#" class="btn btn-block btn-golden">View wishlist</a></li>
            </ul>
        </div> <!-- End Offcanvas Mobile Menu Wrapper -->

    </div> <!-- End Offcanvas Mobile Menu Section -->

    <!-- Start Offcanvas Search Bar Section -->
    <div id="search" class="search-modal">
        <button type="button" class="close">×</button>
        <form>
            <input type="search" placeholder="type keyword(s) here" />
            <button type="submit" class="btn btn-lg btn-golden">Search</button>
        </form>
    </div>
    <!-- End Offcanvas Search Bar Section -->

    <!-- Offcanvas Overlay -->
    <div class="offcanvas-overlay"></div>

    <!-- ...:::: Start Breadcrumb Section:::... -->
    <div class="breadcrumb-section breadcrumb-bg-color--golden">
        <div class="breadcrumb-wrapper">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h3 class="breadcrumb-title">Details</h3>
                        <div class="breadcrumb-nav breadcrumb-nav-color--black breadcrumb-nav-hover-color--golden">
                            <nav aria-label="breadcrumb">
                                <ul>
                                    <!-- <li><a href="index.html">Home</a></li> -->
                                    <li><a href="/shop">Shop</a></li>
                                    <li class="active" aria-current="page">Details</li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- ...:::: End Breadcrumb Section:::... -->
    
    
    
    <!-- ...:::: Start Checkout Section:::... -->
    <div class="container mx-auto p-4" >
        <div class="bg-white shadow-md rounded-lg p-6">
         <div class="flex justify-between items-center border-b pb-4 mb-4">
          <h1 class="text-2xl font-bold">
           Order Id <p><%=order.orderId%></p>
          </h1><br>
          

          <div>
            <%if(order.status!=='Cancelled' &&order.status!=='Delivered'&&order.status!=='Return Request'&&order.status!=='Returned'&&order.status!=='Rejected'&&order.status!='Pending'){%>
           <a onclick="cancel('<%=order.orderId%>')" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 mr-2">
            <i class="fas fa-times">
            </i>
            Cancel Order
        </a>
        <%}else if(order.status==="Delivered"){%>
            <a onclick="returnn('<%=order.orderId%>')" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mr-2">
                <i class="fas fa-undo"></i>
                Returnd Order
            </a>
            <%}else if(order.status==='Return Request'){%>
              <span class="text-danger">Return Request</span>
                <%}else if(order.status==='Returned'){%>
                    <span class="text-danger">Returned</span>
                    <%}%>
           <%if(order.status==='Delivered' ||order.status==='Rejected'){%>
            
            <a href="/download-pdf/<%= order.orderId %>" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                <i class="fas fa-print"></i>
                Print
            </a>
            
           <%}%>
          </div>
         </div>
         <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
           <h2 class="text-xl font-semibold mb-2">
            Customer Details
           </h2>
           <p>
            <strong>
             Name:
            </strong>
            <%=order.userId.name%>
           </p>
           <p>
            <strong>
             Email:
            </strong>
            <%=order.userId.email%>
           </p>
           <p>
            <strong>
             Phone:
            </strong>
            <%=order.userId.phone%>
           </p>
           <p>
            <strong>
             Address:
            </strong>
            <%=order.address.streetaddress%>
           </p>
           <p>
            <strong>
             Pincode:
            </strong>
            <%=order.address.pincode%>
           </p>
          </div>
          <div>
           <h2 class="text-xl font-semibold mb-2">
            Order Details
           </h2>
           <p>
            <strong>
             Order Date:
            </strong>
            <%=order.createdOn%>
           </p>
           <p>
            <strong>
             Shipping Method:
            </strong>
            Standard Shipping
           </p>
           <p>
            <strong>
             Payment Method:
            </strong>
            <%=order.paymentMethod%>
           </p>
           <p>
            <strong>
             Status:
            </strong>
            <%=order.status%>
            
           </p>
          </div>
         </div>
         
         <div class="mt-6">
          <h2 class="text-xl font-semibold mb-4">
           Items Ordered
          </h2>
          <div class="overflow-x-auto">
           <table class="min-w-full bg-white">
            <thead>
             <tr>
              <th class="py-2 px-4 border-b">
               Item
              </th>
              <th class="py-2 px-4 border-b">
               Quantity
              </th>
              <th class="py-2 px-4 border-b">
               Price
              </th>
              <th class="py-2 px-4 border-b">
               Total
              </th>
             </tr>
            </thead>
            <tbody>
                <%for(let i=0;i<order.orderedItems.length;i++){%>
                    <tr>
                        <td class="py-2 px-4 border-b flex items-center">
                            <img alt="Image of Product 1" class="w-12 h-12 mr-4" src="/uploads/<%= order.orderedItems[i].Product.productImage[0] %>">
                            <p><%= order.orderedItems[i].Product.productName %></p>
                        </td>
                        <td class="py-2 px-4 border-b">
                            <%= order.orderedItems[i].quantity %>
                        </td>
                        <td class="py-2 px-4 border-b">
                            <%= order.orderedItems[i].price %>
                        </td>
                        <td class="py-2 px-4 border-b">
                            <%=order.finalAmount%>
                        </td>
                    
                        <% if (order.orderedItems[i].status === 'Shipped'&&order.status!='Pending') { %>
                            <td>
                                <a onclick="indivdual('<%= order.orderId %>', '<%= order.orderedItems[i]._id %>')" class="text-red-500 cursor-pointer">
                                    <i class="fas fa-times"></i> Cancel Product
                                </a>
                            </td>
                        <% } else if (order.orderedItems[i].status === 'Cancelled') { %>
                            <td>
                                <span class="text-danger">Cancelled</span>
                            </td>
                        <% } else if (order.orderedItems[i].status === 'Return Request') { %>
                            <td>
                                <span class="text-danger"><%= order.orderedItems[i].status %></span>
                            </td>
                        <% } else if (order.orderedItems[i].status === 'Delivered') { %> 
                            <td>
                                <a onclick="productreturn('<%= order.orderedItems[i]._id %>')" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                                    <i class="fas fa-undo"></i> Return Product
                                </a>
                            </td>
                        <% }else if(order.status!='Pending'){%>
                            <td>
                                <span class="text-danger"><%= order.orderedItems[i].status %></span>
                            </td>
                            <%}%>
                    </tr>
                    
                <% } %>
            </tbody>
            
            <script>
                async function productreturn(productId) {
                    try {
                        const result = await Swal.fire({
                            title: "Are you sure?",
                            text: "Do you want to return this product?",
                            icon: "warning",
                            showCancelButton: true,
                            confirmButtonColor: "#3085d6",
                            cancelButtonColor: "#d33",
                            confirmButtonText: "Yes, return it!"
                        });
            
                        if (result.isConfirmed) {
                            const response = await fetch('/return-product', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({ productId }),
                            });
            
                            const data = await response.json();
            
                            if (response.ok) {
                                Swal.fire({
                                    title: "Success!",
                                    text: data.message,
                                    icon: "success"
                                }).then(() => {
                                    location.reload();
                                });
                            } else {
                                Swal.fire({
                                    title: "Error!",
                                    text: "Failed to process return request: " + data.message,
                                    icon: "error"
                                });
                            }
                        }
                    } catch (error) {
                        console.error("Error:", error);
                        Swal.fire({
                            title: "Error!",
                            text: "An error occurred while processing the return request.",
                            icon: "error"
                        });
                    }
                }
            </script>
            
           </table>
          </div>
         </div>
         <div class="mt-6 flex justify-end">
          <div class="text-right">
           <p class="text-lg">
            <strong>
             Subtotal:
            </strong>
            <%=order.finalAmount%>
           </p>
           <p class="text-lg">
            <strong>
             Shipping:
            </strong>
            <%=order.DeliveryCharge%>
           </p>
           <p class="text-lg">
            <strong>
             Total:
            </strong>
            <%=order.finalAmount%>
           </p>
          </div>
         </div>
        </div>
       </div>

    <!-- Start Footer Section -->
    <%- include('../partials/user/footer.ejs') %>
    <!-- End Footer Section -->

    <!-- material-scrolltop button -->
   

    <!-- ::::::::::::::All JS Files here :::::::::::::: -->
    <!-- Global Vendor, plugins JS -->
    <!-- <script src="assets/js/vendor/modernizr-3.11.2.min.js"></script>
    <script src="assets/js/vendor/jquery-3.5.1.min.js"></script>
    <script src="assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
    <script src="assets/js/vendor/popper.min.js"></script>
    <script src="assets/js/vendor/bootstrap.min.js"></script>
    <script src="assets/js/vendor/jquery-ui.min.js"></script>  -->

    <!--Plugins JS-->
    <!-- <script src="assets/js/plugins/swiper-bundle.min.js"></script>
    <script src="assets/js/plugins/material-scrolltop.js"></script>
    <script src="assets/js/plugins/jquery.nice-select.min.js"></script>
    <script src="assets/js/plugins/jquery.zoom.min.js"></script>
    <script src="assets/js/plugins/venobox.min.js"></script>
    <script src="assets/js/plugins/jquery.waypoints.js"></script>
    <script src="assets/js/plugins/jquery.lineProgressbar.js"></script>
    <script src="assets/js/plugins/aos.min.js"></script>
    <script src="assets/js/plugins/jquery.instagramFeed.js"></script>
    <script src="assets/js/plugins/ajax-mail.js"></script> -->

    <!-- Use the minified version files listed below for better performance and remove the files listed above -->
   
    <script src="/assets/js/vendor/vendor.min.js"></script>
    <script src="/assets/js/plugins/plugins.min.js"></script>

    <!-- Main JS -->
    <!-- <script src="assets/js/main.js"></script> -->
    <script src="/assets/js/main.js"></script>
</body>
<style>

    .checkout-container {
        display: flex;
        gap: 20px;
        max-width: 1200px;
        margin: 0 auto;
    }
    .address-section {
        flex: 1;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .order-section {
        flex: 1;
        background: white;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .section-header {
        background: #2d2d2d;
        color: white;
        padding: 15px 20px;
        margin: -20px -20px 20px -20px;
        border-radius: 8px 8px 0 0;
        font-size: 16px;
        font-weight: bold;
    }
    .address-card {
        border: 1px solid #ddd;
        padding: 15px;
        margin-bottom: 15px;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    .address-card:hover {
        border-color: #666;
    }
    .address-card.selected {
        border-color: #2d2d2d;
        background-color: #f9f9f9;
    }
    .address-type {
        font-size: 12px;
        color: #666;
        margin-bottom: 5px;
    }
    .address-details {
        font-size: 14px;
        line-height: 1.4;
    }
    .add-address-btn {
        background: none;
        border: 1px dashed #666;
        padding: 15px;
        width: 100%;
        text-align: center;
        cursor: pointer;
        border-radius: 4px;
        margin-top: 10px;
    }
    .add-address-btn:hover {
        background: #f5f5f5;
    }
    .order-table {
        width: 100%;
        border-collapse: collapse;
    }
    .order-table th {
        text-align: left;
        padding: 15px 20px;
        background: #f5f5f5;
        font-weight: normal;
        color: #666;
    }
    .order-table td {
        padding: 15px 20px;
        border-bottom: 1px solid #eee;
    }
    .order-table tr:last-child td {
        border-bottom: none;
    }
    .total-row td {
        font-weight: bold;
        border-top: 2px solid #eee;
    }
    .price {
        text-align: right;
    }
</style>
<script>
    document.querySelectorAll('.address-card').forEach(card => {
        card.addEventListener('click', () => {
            
            document.querySelectorAll('.address-card').forEach(c => {
                c.classList.remove('selected');
            });
         
            card.classList.add('selected');
        });
    });

    document.querySelector('.add-address-btn').addEventListener('click', () => {
        
        alert('Add new address functionality would go here');
    });
</script>
<script>
 async function cancel(id) {
    try {
        // Swal.fire({
        //     title: 'Please wait...',
        //     text: 'Attempting to cancel the order...',
        //     icon: 'info',
        //     allowOutsideClick: false,
        //     showConfirmButton: false,
        //     didOpen: () => {
        //         Swal.showLoading();
        //     }
        // });

        const response = await fetch('/cancelorder', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ id })
        });

        const result = await response.json();

        Swal.close();

        if (response.ok && result.success) {
     
          await Swal.fire({
                title: 'Success!',
                text: result.message,
                icon: 'success',
                confirmButtonText: 'OK'
            }).then(() => {
     
                window.location.href = '/account'; 

            });
        } else {
   
            Swal.fire({
                title: 'Error!',
                text: result.message || "Failed to cancel order.",
                icon: 'error',
                confirmButtonText: 'Try Again'
            });
        }
    } catch (error) {
        console.log(error);
  
        Swal.fire({
            title: 'Error!',
            text: 'An error occurred. Please try again.',
            icon: 'error',
            confirmButtonText: 'OK'
        });
    }
}

</script>


<script>
    async function returnn(orderId) {
    try {
        Swal.fire({
            title: 'Return Item',
            html: `
                <div class="mb-3">
                    <label for="returnReasonSelect" class="form-label">Select Return Reason</label>
                    <select class="form-select" id="returnReasonSelect">
                        <option value="">Select a reason</option>
                        <option value="Damaged Product">Damaged Product</option>
                        <option value="Wrong Item Received">Wrong Item Received</option>
                        <option value="Not as Described">Not as Described</option>
                        <option value="Size/Fit Issue">Size/Fit Issue</option>
                        <option value="Quality Issue">Quality Issue</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="mb-3" id="returnReasonTextContainer" style="display: none;">
                    <label for="returnReasonText" class="form-label">Please specify the reason</label>
                    <textarea class="form-control" id="returnReasonText" rows="3"></textarea>
                </div>
            `,
            showCancelButton: true,
            confirmButtonText: 'Submit Return Request',
            cancelButtonText: 'Cancel',
            preConfirm: () => {
                const returnReason = document.getElementById('returnReasonSelect').value;
                const additionalReason = document.getElementById('returnReasonText').value;

                if (!returnReason) {
                    Swal.showValidationMessage('Please select a return reason.');
                    return false;
                }

                return { orderId, returnReason, additionalReason };
            }
        }).then(async (result) => {
            if (result.isConfirmed) {
                const { returnReason, additionalReason } = result.value;

                const response = await fetch('/api/submit-return', {
                    method: 'POST',
                    headers: {
                        'Content-Type':'application/json'
                    },
                    body: JSON.stringify({
                        orderId,
                        returnReason,
                        additionalReason
                    })
                });

                if (response.ok) {
                  await   Swal.fire('Success', 'Your return request has been submitted.', 'success');
                    const returnButton = document.querySelector(`a[onclick="returnn('${orderId}')"]`);
                    if (returnButton) {
                        returnButton.outerHTML = '<span class="text-danger">Return Requested</span>';
                    }
                    // window.location.reload()
                    
                    
                } else {
                    Swal.fire('Error', 'Failed to submit the return request.', 'error');
                }
            }else{
                console.log("heloo")
            }
        });
    } catch (err) {
        Swal.fire('Error', 'An error occurred: ' + err, 'error');
    }
}

</script>


<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


<!-- <script>
   async function indivdual(orderId,productId){
        console.log('orderId',orderId)
        console.log('productId',productId)
        const response= await fetch('/productCancel',{
          
            method:"POST",
            headers:{
                'Content-Type':'application/json',
            },
            body:JSON.stringify({orderId,productId})
        })

        let data=await response.json()
        if(data.success){
            alert("success")
        }else{
            alert("fail")
        }

        
    }
</script> -->

<script>
    async function indivdual(orderId, productId) {
        const result = await Swal.fire({
            title: "Are you sure?",
            text: "You won't be able to revert this!",
            icon: "warning",
            showCancelButton: true,
            confirmButtonText: "Yes, cancel it!",
            cancelButtonText: "No, keep it",
            reverseButtons: true
        });
 
        if (result.isConfirmed) {
            try {
                const response = await fetch('/productCancel', {
                    method: "POST",
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ orderId, productId })
                });
 
                let data = await response.json();
                console.log(data)
                if (data.success) {
                  await  Swal.fire("Cancelled!", "The product has been cancelled.", "success");
                  window.location.reload()
                   
                } else {
                    Swal.fire("Failed!", "Product cancellation failed.", "error");
                }
                
            } catch (error) {
                Swal.fire("Error!", "Something went wrong.", "error");
            }
        }
    }
 </script>

<style>
    .onhover-show-div {
position: relative; 
display: inline-block;
}

.onhover-show-div ul {
display: none; 
position: absolute; 
top: 100%; /* Show below the hover element */
left: 0;
background-color: white;
box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2); /* Add shadow for visibility */
z-index: 1000; /* Ensure it appears above other content */
list-style: none; /* Remove default bullet points */
padding: 10px;
margin: 0;
max-height: none; /* Prevent height restrictions */
overflow: visible; /* Allow full dropdown to display */
}

.onhover-show-div:hover ul {
display: block; /* Show dropdown on hover */
}

.onhover-show-div ul li {
padding: 5px 10px; /* Add spacing between items */
white-space: nowrap; /* Prevent line breaks */
line-height: 1.5; /* Add spacing for better visibility */
}

.onhover-show-div ul li a {
text-decoration: none; /* Remove underline */
color: black; /* Default text color */
}

.onhover-show-div ul li a:hover {
color: rgb(14, 15, 12); /* Change color on hover */
}

/* New rule for the icon inside the .onhover-show-div */
.onhover-show-div > i {
color: rgb(0, 0, 0); /* Change icon color to white */
}

 </style>

  
</html>
